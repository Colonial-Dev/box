.\" Automatically generated by Pandoc 3.4
.\"
.TH "FISHTANK" "1" "" "Version 1.0" "User Manual"
.SH NAME
\f[B]tankctl\f[R] \- entrypoint for Fishtank, a simple interactive
container manager
.SH SYNOPSIS
.PP
\f[B]tankctl\f[R] [subcommand]
.PD 0
.P
.PD
\f[B]tankctl\f[R]
[\f[B]\-h\f[R]|\f[B]\-\-help\f[R]|\f[B]\-v\f[R]|\f[B]\-\-version\f[R]]
.SH DESCRIPTION
Defers to the provided subcommand for managing OCI images and
containers.
See below for the list of available subcommands; run \f[B]man tankctl
[subcommand]\f[R] for detailed individual information.
.SS Options
.TP
\-h, \-\-help
Displays this manual page.
.TP
\-v, \-\-version
Displays the current version number.
.SS Subcommands
.TP
build
Compile Fishtank\-managed container definitions into OCI images.
.TP
create
Create a new container definition, or a symbolic link to an existing
one.
.TP
containers
List all managed containers and their status.
.TP
down
Stop and remove one or more managed containers.
.TP
edit
Edit an existing container definition using \f[B]$EDITOR\f[R].
.TP
enter
Execute \f[B]$SHELL\f[R] inside a container.
.TP
exec
Execute an arbitrary command inside a container.
.TP
images
List all managed images.
.TP
restart
Restart one or more managed containers.
.TP
reup
Remove and re\-create one or more managed containers.
.TP
start
Start one or more managed containers.
.TP
stop
Stop one or more managed containers.
.TP
up
Create managed containers from stored images.
.SH GETTING STARTED
Fishtank requires a definition (\[dq]tank\[dq]) for each container
you\[aq]d like to create.
Definitions can be in two different formats: \- Standard
Container/Dockerfiles \- just add \f[CR]# fishtank containerfile\f[R] to
the text and you\[aq]re good to go.
\- \f[CR]fish\f[R] shell scripts that run in a special harness.
This injects additional functions and wraps a few others to provide
additional functionality not present in Containerfiles, like the ability
to declare runtime arguments such as mounts.
.PP
Either type must be stored under \f[CR]$XDG_CONFIG_HOME/fishtank/\f[R]
(typically \f[CR]\[ti]/.config/fishtank/\f[R]) with the file extension
\f[CR].tank\f[R].
.PP
To create and edit a new definition, you can simply run
\f[CR]tankctl create <NAME>\f[R].
This will create the file and open it using your \f[CR]$EDITOR\f[R].
.PP
\f[CR]tankctl edit <NAME>\f[R] can be used to alter existing
definitions; both commands will use a temporary file for editing and
perform syntax checks before finalizing any changes.
.PP
Shell\-based definitions run in the same directory as the definition,
and should look something like this:
.IP
.EX
\f[I]# Create a new working container.\f[R]
set ctr \f[B](\f[R]buildah from fedora\-toolbox:latest\f[B])\f[R]

\f[I]# Set up the new container...\f[R]
RUN dnf install gcc

\f[I]# Commit the configured container as an image.\f[R]
buildah commit $ctr toolbox
.EE
.PP
The harness for shell\-based definitions enables two primary toolkits
for setting up your container.
\- All Containerfile directives like \f[CR]RUN\f[R] and \f[CR]ADD\f[R]
are polyfilled as Fish functions, and generally act the same as their
real counterparts.
\- (The most notable exception is pipes and redirections in
\f[CR]RUN\f[R] \- you must wrap them in an \f[CR]sh \-c\f[R] to execute
them wholly inside the working container.)
\- The \f[CR]tankcfg\f[R] script, which lets you: \- Set various
build\-time (some of which are duplicated from the above) and runtime
switches \- Provide arbitrary additional arguments to pass to
\f[CR]podman run\f[R] \- Apply several prepackaged presets (such as
copying a user from the host into the container, or applying security
options to fix bind mounts with SELinux)
.PP
Once you have a definition, run \f[CR]tankctl build\f[R] to compile it
into an OCI image, followed by \f[CR]tankctl up\f[R] to create a
container from the image.
.PP
Complete details on all commands can be found in the \f[CR]man\f[R]
pages bundled with Fishtank.
Alternatively, you can view their Markdown versions \c
.UR https://github.com/Colonial-Dev/fishtank/tree/master/doc
here
.UE \c
\&.
.SH SEE ALSO
\f[B]tankcfg(1)\f[R], \f[B]podman(1)\f[R], \f[B]buildah(1)\f[R]
